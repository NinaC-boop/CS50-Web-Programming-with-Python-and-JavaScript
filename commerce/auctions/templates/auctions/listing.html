{% extends "auctions/layout.html" %}

{% block body %}
    <div class="container">
        <h2>{{ listing.title }}</h2>
        <p><em>{{ listing.category }}</em></p>

        <!-- Stack the columns on mobile by making one full-width and the other half-width -->
        <div class="row">
            <div class="col-6 col-md-4">
                <img src="{{ listing.image_url }}" width="100%">
            </div>
            <div class="col-12 col-md-8">
                <p>{{ listing.description }}</p>

                <p><strong>Starting bid</strong> [{{ listing.starting_bid.timestamp }}]: {{ listing.starting_bid.price }} by {{ listing.starting_bid.user }}</p>

                <p><strong>Current bid</strong> [{{ listing.current_bid.timestamp }}]: {{ listing.current_bid.price }} by {{ listing.current_bid.user }}</p>

                <form action="{% url 'add_watchlist' %}" method="POST">
                    {% csrf_token %}
                    <input type="submit" value="Add to Watchlist">
                </form>
            </div>
        </div>

        <br>

        <div class="row">
            <div class="col-12 col-md-8">
                <h2>Bids</h2>
                {% for bid in listing.bids %}
                    <p>[{{ bid.timestamp }}]: {{ bid.price }} by {{ bid.user }}</p>
                {% endfor %}
            </div>
        </div>



    </div>
    
{% endblock %}